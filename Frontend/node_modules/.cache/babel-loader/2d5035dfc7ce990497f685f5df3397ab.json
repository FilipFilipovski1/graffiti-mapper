{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Filip\\\\react-frontend-02-prj-structure-routing\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Filip\\\\react-frontend-02-prj-structure-routing\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Filip\\\\react-frontend-02-prj-structure-routing\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useContext}from'react';import Card from'../../shared/components/UIElements/Card';import Button from'../../shared/components/FormElements/Button';import Modal from'../../shared/components/UIElements/Modal';import Map from'../../shared/components/UIElements/Map';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import{AuthContext}from'../../shared/context/auth-context';import{useHttpClient}from'../../shared/hooks/http-hook';import'./PlaceItem.css';var PlaceItem=function PlaceItem(props){var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var auth=useContext(AuthContext);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showMap=_useState2[0],setShowMap=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showConfirmModal=_useState4[0],setShowConfirmModal=_useState4[1];var openMapHandler=function openMapHandler(){return setShowMap(true);};var closeMapHandler=function closeMapHandler(){return setShowMap(false);};var showDeleteWarningHandler=function showDeleteWarningHandler(){setShowConfirmModal(true);};var cancelDeleteHandler=function cancelDeleteHandler(){setShowConfirmModal(false);};var confirmDeleteHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setShowConfirmModal(false);_context.prev=1;_context.next=4;return sendRequest(process.env.REACT_APP_BACKEND_URL+\"/places/\".concat(props.id),'DELETE',null,{Authorization:'Bearer '+auth.token});case 4:props.onDelete(props.id);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);case 9:case\"end\":return _context.stop();}}},_callee,null,[[1,7]]);}));return function confirmDeleteHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ErrorModal,{error:error,onClear:clearError}),/*#__PURE__*/React.createElement(Modal,{show:showMap,onCancel:closeMapHandler,header:props.address,contentClass:\"place-item__modal-content\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/React.createElement(Button,{onClick:closeMapHandler},\"CLOSE\")},/*#__PURE__*/React.createElement(\"div\",{className:\"map-container\"},/*#__PURE__*/React.createElement(Map,{center:props.coordinates,zoom:16}))),/*#__PURE__*/React.createElement(Modal,{show:showConfirmModal,onCancel:cancelDeleteHandler,header:\"Are you sure?\",footerClass:\"place-item__modal-actions\",footer:/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{inverse:true,onClick:cancelDeleteHandler},\"CANCEL\"),/*#__PURE__*/React.createElement(Button,{danger:true,onClick:confirmDeleteHandler},\"DELETE\"))},/*#__PURE__*/React.createElement(\"p\",null,\"Do you want to proceed and delete this place? Please note that it can't be undone thereafter.\")),/*#__PURE__*/React.createElement(\"li\",{className:\"place-item\"},/*#__PURE__*/React.createElement(Card,{className:\"place-item__content\"},isLoading&&/*#__PURE__*/React.createElement(LoadingSpinner,{asOverlay:true}),/*#__PURE__*/React.createElement(\"div\",{className:\"place-item__image\"},/*#__PURE__*/React.createElement(\"img\",{src:\"\".concat(process.env.REACT_APP_ASSET_URL,\"/\").concat(props.image),alt:props.title})),/*#__PURE__*/React.createElement(\"div\",{className:\"place-item__info\"},/*#__PURE__*/React.createElement(\"h2\",null,props.title),/*#__PURE__*/React.createElement(\"h3\",null,props.address),/*#__PURE__*/React.createElement(\"p\",null,props.description)),/*#__PURE__*/React.createElement(\"div\",{className:\"place-item__actions\"},/*#__PURE__*/React.createElement(Button,{inverse:true,onClick:openMapHandler},\"VIEW ON MAP\"),auth.userId===props.creatorId&&/*#__PURE__*/React.createElement(Button,{to:\"/places/\".concat(props.id)},\"EDIT\"),auth.userId===props.creatorId&&/*#__PURE__*/React.createElement(Button,{danger:true,onClick:showDeleteWarningHandler},\"DELETE\")))));};export default PlaceItem;","map":{"version":3,"sources":["C:/Users/Filip/react-frontend-02-prj-structure-routing/src/places/components/PlaceItem.js"],"names":["React","useState","useContext","Card","Button","Modal","Map","ErrorModal","LoadingSpinner","AuthContext","useHttpClient","PlaceItem","props","isLoading","error","sendRequest","clearError","auth","showMap","setShowMap","showConfirmModal","setShowConfirmModal","openMapHandler","closeMapHandler","showDeleteWarningHandler","cancelDeleteHandler","confirmDeleteHandler","process","env","REACT_APP_BACKEND_URL","id","Authorization","token","onDelete","address","coordinates","REACT_APP_ASSET_URL","image","title","description","userId","creatorId"],"mappings":"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","sourcesContent":["import React, { useState, useContext } from 'react';\r\n\r\nimport Card from '../../shared/components/UIElements/Card';\r\nimport Button from '../../shared/components/FormElements/Button';\r\nimport Modal from '../../shared/components/UIElements/Modal';\r\nimport Map from '../../shared/components/UIElements/Map';\r\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\r\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\r\nimport { AuthContext } from '../../shared/context/auth-context';\r\nimport { useHttpClient } from '../../shared/hooks/http-hook';\r\nimport './PlaceItem.css';\r\n\r\nconst PlaceItem = props => {\r\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\r\n  const auth = useContext(AuthContext);\r\n  const [showMap, setShowMap] = useState(false);\r\n  const [showConfirmModal, setShowConfirmModal] = useState(false);\r\n\r\n  const openMapHandler = () => setShowMap(true);\r\n\r\n  const closeMapHandler = () => setShowMap(false);\r\n\r\n  const showDeleteWarningHandler = () => {\r\n    setShowConfirmModal(true);\r\n  };\r\n\r\n  const cancelDeleteHandler = () => {\r\n    setShowConfirmModal(false);\r\n  };\r\n\r\n  const confirmDeleteHandler = async () => {\r\n    setShowConfirmModal(false);\r\n    try {\r\n      await sendRequest(\r\n        process.env.REACT_APP_BACKEND_URL+`/places/${props.id}`,\r\n        'DELETE',\r\n        null,\r\n        {\r\n          Authorization: 'Bearer ' + auth.token\r\n        }\r\n      );\r\n      props.onDelete(props.id);\r\n    } catch (err) {}\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      <Modal\r\n        show={showMap}\r\n        onCancel={closeMapHandler}\r\n        header={props.address}\r\n        contentClass=\"place-item__modal-content\"\r\n        footerClass=\"place-item__modal-actions\"\r\n        footer={<Button onClick={closeMapHandler}>CLOSE</Button>}\r\n      >\r\n        <div className=\"map-container\">\r\n          <Map center={props.coordinates} zoom={16} />\r\n        </div>\r\n      </Modal>\r\n      <Modal\r\n        show={showConfirmModal}\r\n        onCancel={cancelDeleteHandler}\r\n        header=\"Are you sure?\"\r\n        footerClass=\"place-item__modal-actions\"\r\n        footer={\r\n          <React.Fragment>\r\n            <Button inverse onClick={cancelDeleteHandler}>\r\n              CANCEL\r\n            </Button>\r\n            <Button danger onClick={confirmDeleteHandler}>\r\n              DELETE\r\n            </Button>\r\n          </React.Fragment>\r\n        }\r\n      >\r\n        <p>\r\n          Do you want to proceed and delete this place? Please note that it\r\n          can't be undone thereafter.\r\n        </p>\r\n      </Modal>\r\n      <li className=\"place-item\">\r\n        <Card className=\"place-item__content\">\r\n          {isLoading && <LoadingSpinner asOverlay />}\r\n          <div className=\"place-item__image\">\r\n            <img\r\n              src={`${process.env.REACT_APP_ASSET_URL}/${props.image}`}\r\n              alt={props.title}\r\n            />\r\n          </div>\r\n          <div className=\"place-item__info\">\r\n            <h2>{props.title}</h2>\r\n            <h3>{props.address}</h3>\r\n            <p>{props.description}</p>\r\n          </div>\r\n          <div className=\"place-item__actions\">\r\n            <Button inverse onClick={openMapHandler}>\r\n              VIEW ON MAP\r\n            </Button>\r\n            {auth.userId === props.creatorId && (\r\n              <Button to={`/places/${props.id}`}>EDIT</Button>\r\n            )}\r\n\r\n            {auth.userId === props.creatorId && (\r\n              <Button danger onClick={showDeleteWarningHandler}>\r\n                DELETE\r\n              </Button>\r\n            )}\r\n          </div>\r\n        </Card>\r\n      </li>\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default PlaceItem;\r\n"]},"metadata":{},"sourceType":"module"}