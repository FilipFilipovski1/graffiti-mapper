{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\Filip\\\\react-frontend-02-prj-structure-routing\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Filip\\\\react-frontend-02-prj-structure-routing\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Filip\\\\react-frontend-02-prj-structure-routing\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{useParams}from'react-router-dom';import PlaceList from'../components/PlaceList';import ErrorModal from'../../shared/components/UIElements/ErrorModal';import LoadingSpinner from'../../shared/components/UIElements/LoadingSpinner';import{useHttpClient}from'../../shared/hooks/http-hook';var UserPlaces=function UserPlaces(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),loadedPlaces=_useState2[0],setLoadedPlaces=_useState2[1];var _useHttpClient=useHttpClient(),isLoading=_useHttpClient.isLoading,error=_useHttpClient.error,sendRequest=_useHttpClient.sendRequest,clearError=_useHttpClient.clearError;var userId=useParams().userId;useEffect(function(){var fetchPlaces=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var responseData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return sendRequest(\"\".concat(process.env.REACT_APP_BACKEND_URL,\"/places/user/\").concat(userId));case 3:responseData=_context.sent;setLoadedPlaces(responseData.places);_context.next=9;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function fetchPlaces(){return _ref.apply(this,arguments);};}();fetchPlaces();},[sendRequest,userId]);var placeDeletedHandler=function placeDeletedHandler(deletedPlaceId){setLoadedPlaces(function(prevPlaces){return prevPlaces.filter(function(place){return place.id!==deletedPlaceId;});});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(ErrorModal,{error:error,onClear:clearError}),isLoading&&/*#__PURE__*/React.createElement(\"div\",{className:\"center\"},/*#__PURE__*/React.createElement(LoadingSpinner,null)),!isLoading&&loadedPlaces&&/*#__PURE__*/React.createElement(PlaceList,{items:loadedPlaces,onDeletePlace:placeDeletedHandler}));};export default UserPlaces;","map":{"version":3,"sources":["C:/Users/Filip/react-frontend-02-prj-structure-routing/src/places/pages/UserPlaces.js"],"names":["React","useEffect","useState","useParams","PlaceList","ErrorModal","LoadingSpinner","useHttpClient","UserPlaces","loadedPlaces","setLoadedPlaces","isLoading","error","sendRequest","clearError","userId","fetchPlaces","process","env","REACT_APP_BACKEND_URL","responseData","places","placeDeletedHandler","deletedPlaceId","prevPlaces","filter","place","id"],"mappings":"4hBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,SAAT,KAA0B,kBAA1B,CAEA,MAAOC,CAAAA,SAAP,KAAsB,yBAAtB,CACA,MAAOC,CAAAA,UAAP,KAAuB,+CAAvB,CACA,MAAOC,CAAAA,cAAP,KAA2B,mDAA3B,CACA,OAASC,aAAT,KAA8B,8BAA9B,CAEA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,eACiBN,QAAQ,EADzB,wCAChBO,YADgB,eACFC,eADE,kCAE+BH,aAAa,EAF5C,CAEfI,SAFe,gBAEfA,SAFe,CAEJC,KAFI,gBAEJA,KAFI,CAEGC,WAFH,gBAEGA,WAFH,CAEgBC,UAFhB,gBAEgBA,UAFhB,CAIvB,GAAMC,CAAAA,MAAM,CAAGZ,SAAS,GAAGY,MAA3B,CAEAd,SAAS,CAAC,UAAM,CACd,GAAMe,CAAAA,WAAW,0FAAG,0LAEWH,CAAAA,WAAW,WACjCI,OAAO,CAACC,GAAR,CAAYC,qBADqB,yBACgBJ,MADhB,EAFtB,QAEVK,YAFU,eAKhBV,eAAe,CAACU,YAAY,CAACC,MAAd,CAAf,CALgB,iJAAH,kBAAXL,CAAAA,WAAW,0CAAjB,CAQAA,WAAW,GACZ,CAVQ,CAUN,CAACH,WAAD,CAAcE,MAAd,CAVM,CAAT,CAYA,GAAMO,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAAAC,cAAc,CAAI,CAC5Cb,eAAe,CAAC,SAAAc,UAAU,QACxBA,CAAAA,UAAU,CAACC,MAAX,CAAkB,SAAAC,KAAK,QAAIA,CAAAA,KAAK,CAACC,EAAN,GAAaJ,cAAjB,EAAvB,CADwB,EAAX,CAAf,CAGD,CAJD,CAMA,mBACE,oBAAC,KAAD,CAAO,QAAP,mBACE,oBAAC,UAAD,EAAY,KAAK,CAAEX,KAAnB,CAA0B,OAAO,CAAEE,UAAnC,EADF,CAEGH,SAAS,eACR,2BAAK,SAAS,CAAC,QAAf,eACE,oBAAC,cAAD,MADF,CAHJ,CAOG,CAACA,SAAD,EAAcF,YAAd,eACC,oBAAC,SAAD,EAAW,KAAK,CAAEA,YAAlB,CAAgC,aAAa,CAAEa,mBAA/C,EARJ,CADF,CAaD,CArCD,CAuCA,cAAed,CAAAA,UAAf","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { useParams } from 'react-router-dom';\r\n\r\nimport PlaceList from '../components/PlaceList';\r\nimport ErrorModal from '../../shared/components/UIElements/ErrorModal';\r\nimport LoadingSpinner from '../../shared/components/UIElements/LoadingSpinner';\r\nimport { useHttpClient } from '../../shared/hooks/http-hook';\r\n\r\nconst UserPlaces = () => {\r\n  const [loadedPlaces, setLoadedPlaces] = useState();\r\n  const { isLoading, error, sendRequest, clearError } = useHttpClient();\r\n\r\n  const userId = useParams().userId;\r\n\r\n  useEffect(() => {\r\n    const fetchPlaces = async () => {\r\n      try {\r\n        const responseData = await sendRequest(\r\n          `${process.env.REACT_APP_BACKEND_URL}/places/user/${userId}`\r\n        );\r\n        setLoadedPlaces(responseData.places);\r\n      } catch (err) {}\r\n    };\r\n    fetchPlaces();\r\n  }, [sendRequest, userId]);\r\n\r\n  const placeDeletedHandler = deletedPlaceId => {\r\n    setLoadedPlaces(prevPlaces =>\r\n      prevPlaces.filter(place => place.id !== deletedPlaceId)\r\n    );\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <ErrorModal error={error} onClear={clearError} />\r\n      {isLoading && (\r\n        <div className=\"center\">\r\n          <LoadingSpinner />\r\n        </div>\r\n      )}\r\n      {!isLoading && loadedPlaces && (\r\n        <PlaceList items={loadedPlaces} onDeletePlace={placeDeletedHandler} />\r\n      )}\r\n    </React.Fragment>\r\n  );\r\n};\r\n\r\nexport default UserPlaces;\r\n"]},"metadata":{},"sourceType":"module"}